<h2 class="page-title">Stock Management</h2>

<div class="toolbar">
  <mat-form-field appearance="outline" class="search">
    <mat-label>Search products</mat-label>
    <input matInput (keyup)="applyFilter($event)" />
  </mat-form-field>
</div>

<table mat-table matSort [dataSource]="dataSource" class="mat-elevation-z1 user-table">

  <!-- Product -->
  <ng-container matColumnDef="product">
    <th mat-header-cell *matHeaderCellDef mat-sort-header="product">Product</th>

    <td mat-cell *matCellDef="let row">
      {{ row.productName }}
    </td>
  </ng-container>



<!-- Stock -->
<ng-container matColumnDef="stock">
  <th mat-header-cell *matHeaderCellDef>Stock</th>
  <td mat-cell *matCellDef="let row">

    <div class="stock-wrapper">

      <!-- Status Dot -->
      <span
        class="stock-dot"
        [class.ok]="row.stock >= 10"
        [class.low]="row.stock > 0 && row.stock < 10"
        [class.empty]="row.stock === 0">
      </span>

      <!-- Stock Count -->
      <span class="stock-value">{{ row.stock }}</span>

      <!-- Low Stock Badge -->
      <span *ngIf="row.stock > 0 && row.stock < 10" class="badge low">
        LOW
      </span>

      <!-- Out of Stock Badge -->
      <span *ngIf="row.stock === 0" class="badge out">
        OUT
      </span>

    </div>

  </td>
</ng-container>



  <!-- Last Updated -->
  <ng-container matColumnDef="updated">
    <th mat-header-cell *matHeaderCellDef>Last Updated</th>
    <td mat-cell *matCellDef="let row">
  {{ row.lastUpdated  }}
</td>

  </ng-container>

  <!-- Actions -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef class="center">Actions</th>
    <td mat-cell *matCellDef="let row" class="center">
      <div class="actions-wrapper">

        <!-- Add Stock -->
        <button
          mat-icon-button
          class="add-btn"
          matTooltip="Add Stock"
          (click)="addStock(row)">
          <mat-icon>add_circle</mat-icon>
        </button>

       
        <!-- Reduce Stock -->
       <button
          mat-icon-button
         class="reduce-btn"
         [disabled]="row.stock === 0"
         matTooltip="Stock is empty"
         (click)="reduceStock(row)">
        <mat-icon>remove_circle</mat-icon>
        </button>

 

      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>

<mat-paginator
  [pageSize]="5"
  [pageSizeOptions]="[5, 10, 20]"
  showFirstLastButtons>
</mat-paginator>
